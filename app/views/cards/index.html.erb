<div class="card-index-body" data-controller='card' data-action='click->card#reset'>

  <header></header>

  <div class="logo-and-wallet">
    <h2 class="wallet-title">My Wallet</h2>
  </div>
  <%=  image_tag 'under-txt-logo', alt: "under-text-v", class: "under-txt-logo"%>

    <% if @categories.empty? %>
      <p class="coffee-shops">Empty Wallet</p>
      <div class="loyalty-cards-container">
       <div class="empty-loyalty-card">
            <%= link_to brands_path do %>
              <%= image_tag 'cross', alt: "empty-wallet-cross", class: "vector-cross"%>
            <% end %>
        </div>
      </div>

    <% else %>
      <% @categories.each do |name, cards| %>
        <p class="<%= name%>-shops"><%= name.capitalize %> shops</p>
        <div class="loyalty-cards-container">

      <% @cards.each do |card| %>
        <div class="loyalty-card" data-card-target='card' data-action='click->card#flipCard'>
          <div class="loyalty-card-inner">
           
                <div class="loyalty-card-front">

                  <div class="brand-name">
                    <p><i class="fa-regular fa-circle"></i> <%= card.brand.name %></p>
                  </div>

                  <div class="user-date">
                    <h6 class="card-user-name"><%= card.user.first_name %> <%= card.user.last_name %></h6>
                    <h6 class="card-user-name"> <%= card.created_at.strftime('%m/%y') %> </h6>
                  </div>

                </div>

            <div class="loyalty-card-back">
              <div class="brand-name">
                <p><i class="fa-regular fa-circle"></i> <%= card.brand.name %></p>
              </div>

              <% stamps = card.stamps %>
              <%# <% stamps = 3 %>
              <div class="stamp-area">
                <% card.card_style.max_stamps.times do %>
                  <% if stamps.positive? %>
                    <i class="fa-solid fa-circle-xmark" style="color: #ffffff;"></i>
                  <% else %>
                    <i class="fa-solid fa-circle" style="color: #ffffff;"></i>
                  <% end %>
                  <% stamps -= 1%>
                <% end %>

              </div>


            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>

  <footer></footer>

</div>
